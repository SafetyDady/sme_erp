# SME ERP Automated Backup Cron Configuration
# Phase 7 - Operational Excellence
#
# Installation:
# sudo crontab -e (or crontab -e for user-level)
# Add the following lines:

# Daily backup at 2:00 AM
0 2 * * * cd /workspace/backend && python3 ops/backup.py >> logs/cron_backup.log 2>&1

# Weekly backup verification (Sunday 3:00 AM)
0 3 * * 0 cd /workspace/backend && python3 ops/backup_verify.py >> logs/cron_verify.log 2>&1

# Monthly cleanup of very old backups (1st day of month, 4:00 AM)
0 4 1 * * cd /workspace/backend && python3 ops/backup_cleanup.py >> logs/cron_cleanup.log 2>&1

# Production Environment Variables (set these in your cron environment)
# BACKUP_ENCRYPTION_KEY=your_production_encryption_key
# BACKUP_S3_BUCKET=your_s3_backup_bucket  
# DATABASE_URL=your_production_database_url

# Example systemd timer alternative (more robust than cron):
# Create /etc/systemd/system/sme-erp-backup.timer:
#
# [Unit]
# Description=SME ERP Daily Backup
# Requires=sme-erp-backup.service
#
# [Timer]
# OnCalendar=daily
# RandomizedDelaySec=1800
# Persistent=true
#
# [Install] 
# WantedBy=timers.target

# Monitoring Integration
# Send backup status to monitoring system
# Uncomment for production monitoring:
# 0 2 * * * cd /workspace/backend && python3 ops/backup.py && python3 ops/send_backup_status.py